# –†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –ë–ñ–î (–ë–µ—Ä–ª—è–Ω–¥—Å–∫–∏–µ –ñ–µ–ª–µ–∑–Ω—ã–µ –î–æ—Ä–æ–≥–∏) üíï

## –û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è

–ó–∞–¥–∞—á–∞ —Ä–µ—à–∞–µ—Ç—Å—è –Ω–∞ **C++** –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

### –ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è
1. –°—Ç—Ä–æ–∏–º –¥–µ—Ä–µ–≤–æ —Å –ø–æ–º–æ—â—å—é –º–∞—Å—Å–∏–≤–∞ `parent[]` –¥–ª—è –∫–∞–∂–¥–æ–π –≤–µ—Ä—à–∏–Ω—ã
2. –•—Ä–∞–Ω–∏–º —Ç–µ–∫—É—â–µ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å—Ç—Ä–µ–ª–æ–∫ –≤ –º–∞—Å—Å–∏–≤–µ `current_switch[]`
3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–π—Å–∞:
   - –°—Ç—Ä–æ–∏–º –ø—É—Ç—å –æ—Ç —Ü–µ–ª–µ–≤–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –∫ –∫–æ—Ä–Ω—é
   - **–ü–µ—Ä–µ–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –ø—É—Ç—å**, —á—Ç–æ–±—ã –∏–¥—Ç–∏ –æ—Ç –∫–æ—Ä–Ω—è –∫ —Ü–µ–ª–∏
   - –ò–¥–µ–º –ø–æ –ø—É—Ç–∏ –∏ —Å—á–∏—Ç–∞–µ–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å—Ç—Ä–µ–ª–æ–∫

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ
**–ü–æ–µ–∑–¥ –¥–≤–∏–∂–µ—Ç—Å—è –æ—Ç –∫–æ—Ä–Ω—è –∫ —Ü–µ–ª–∏, –ø–æ—ç—Ç–æ–º—É –º—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å —Å—Ç—Ä–µ–ª–∫–∏ –≤ —ç—Ç–æ–º –ø–æ—Ä—è–¥–∫–µ!**

## –§–∞–π–ª—ã —Ä–µ—à–µ–Ω–∏—è

### –û—Å–Ω–æ–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ
- **`railway_switches.cpp`** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ C++ —Ä–µ—à–µ–Ω–∏–µ

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
- **`stress_test_generator.py`** - –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–æ–≤
- **`test_railway1.txt`** - —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä 1
- **`test_railway2.txt`** - —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä 2

## –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫

### –ö–æ–º–ø–∏–ª—è—Ü–∏—è
```bash
g++ -O2 -std=c++17 railway_switches.cpp -o railway_switches
```

### –ó–∞–ø—É—Å–∫ –Ω–∞ —Ç–µ—Å—Ç–µ
```bash
./railway_switches < test_railway1.txt
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–∞–º–∏
```bash
python3 stress_test_generator.py
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

‚úÖ –¢–µ—Å—Ç 1 (–∏–∑ —É—Å–ª–æ–≤–∏—è): PASSED (1, 1, 1)
‚úÖ –¢–µ—Å—Ç 2 (–∏–∑ —É—Å–ª–æ–≤–∏—è): PASSED (0, 1, 0, 1, 2, 1)
‚úÖ –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç N=10, Q=20: PASSED
‚úÖ –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç N=100, Q=100: PASSED
‚úÖ –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç N=1000, Q=1000: PASSED
‚úÖ –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç N=5000, Q=5000: PASSED

## –°–ª–æ–∂–Ω–æ—Å—Ç—å

- **–í—Ä–µ–º—è:** O(N + Q√óH), –≥–¥–µ H - –≤—ã—Å–æ—Ç–∞ –¥–µ—Ä–µ–≤–∞
- **–ü–∞–º—è—Ç—å:** O(N)

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤ C++ –≤–µ—Ä—Å–∏–∏

1. `ios_base::sync_with_stdio(false)` - –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å C stdio
2. `cin.tie(NULL)` - –æ—Ç–≤—è–∑–∫–∞ cin –æ—Ç cout
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `vector<int>` –≤–º–µ—Å—Ç–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –º–∞—Å—Å–∏–≤–æ–≤
4. –ö–æ–º–ø–∏–ª—è—Ü–∏—è —Å —Ñ–ª–∞–≥–æ–º `-O2` –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

## –î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∞–π–ª **`railway_switches.cpp`** üíñ